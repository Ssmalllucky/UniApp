(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-goodsDetailed~pages-tabBar-home1~pagesA-store-store~pagesB-integral-integral_detail~page~b53abcb3"],{"28ec":function(e,t,a){"use strict";a("c975"),a("13d5"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,i=/^<\/([-A-Za-z0-9_]+)[^>]*>/,o=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,r=h("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),s=h("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),c=h("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u=h("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),d=h("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),l=h("script,style");function p(e,t){var a,p,h,f=[],g=e;f.last=function(){return this[this.length-1]};while(e){if(p=!0,f.last()&&l[f.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),(function(e,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(a),""})),v("",f.last());else if(0==e.indexOf("\x3c!--")?(a=e.indexOf("--\x3e"),a>=0&&(t.comment&&t.comment(e.substring(4,a)),e=e.substring(a+3),p=!1)):0==e.indexOf("</")?(h=e.match(i),h&&(e=e.substring(h[0].length),h[0].replace(i,v),p=!1)):0==e.indexOf("<")&&(h=e.match(n),h&&(e=e.substring(h[0].length),h[0].replace(n,_),p=!1)),p){a=e.indexOf("<");var m=a<0?e:e.substring(0,a);e=a<0?"":e.substring(a),t.chars&&t.chars(m)}if(e==g)throw"Parse Error: "+e;g=e}function _(e,a,n,i){if(a=a.toLowerCase(),s[a])while(f.last()&&c[f.last()])v("",f.last());if(u[a]&&f.last()==a&&v("",a),i=r[a]||!!i,i||f.push(a),t.start){var l=[];n.replace(o,(function(e,t){var a=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:d[t]?t:"";l.push({name:t,value:a,escaped:a.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(a,l,i)}}function v(e,a){if(a){for(n=f.length-1;n>=0;n--)if(f[n]==a)break}else var n=0;if(n>=0){for(var i=f.length-1;i>=n;i--)t.end&&t.end(f[i]);f.length=n}}v()}function h(e){for(var t={},a=e.split(","),n=0;n<a.length;n++)t[a[n]]=!0;return t}function f(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}function g(e){return e.reduce((function(e,t){var a=t.value,n=t.name;return e[n]?e[n]=e[n]+" "+a:e[n]=a,e}),{})}function m(e){e=f(e);var t=[],a={node:"root",children:[]};return p(e,{start:function(e,n,i){var o={name:e};if(0!==n.length&&(o.attrs=g(n)),i){var r=t[0]||a;r.children||(r.children=[]),r.children.push(o)}else t.unshift(o)},end:function(e){var n=t.shift();if(n.name!==e&&console.error("invalid state: mismatch end tag"),0===t.length)a.children.push(n);else{var i=t[0];i.children||(i.children=[]),i.children.push(n)}},chars:function(e){var n={type:"text",text:e};if(0===t.length)a.children.push(n);else{var i=t[0];i.children||(i.children=[]),i.children.push(n)}},comment:function(e){var a={node:"comment",text:e},n=t[0];n.children||(n.children=[]),n.children.push(a)}}),a.children}var _=m;t.default=_},"72da":function(e,t,a){"use strict";var n=a("ee27");a("a630"),a("a15b"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.LaiKeTui_axios=o,t.LaiKeTuiInvite=r,t.LaiKeTuiShowSaveEWM=s,t.LaiKeTuiShopEWM=c,t.LaiKeTui_collection=u,t.LaiKeTui_shopping=d,t.LaiKeTuiGetCoupon=l,t.LaiKeTui_receive=p,t.LaiKeTui_buy_handle=h,t.LaiKeTui_confirm=f,t.LaiKeTui_spec=g,t.LaiKeTuiShowState=m,t.in_array=_,t.LaiKeTuiSetTimeData=v,t.LaiKeTuiToBr=b;var i=n(a("28ec"));function o(e){var t={module:"app",action:"product",app:"index",pro_id:e.pro_id,access_id:e.access_id};e.bargain?(t.type="KJ",t.attr_id=e.attr_id,t.bargain_id=e.bargain_id):e.seckill&&(t.type="MS",t.navType=e.navType,t.id=e.id),uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(uni.hideLoading(),a&&a.data&&a.data.data&&(e.login_status=a.data.data.login_status),e.load=!1,200==a.data.code){var n=a.data.data,o=n.collection_id,r=n.pro,s=n.access_id,c=n.comments,u=n.attrList,d=n.skuBeanList,l=n.qj_price,p=n.type,h=n.logo,f=n.active,g=n.is_grade,m=n.shop_list,_=n.coupon_str;e.ys_price=l,e.bargain&&(e.cs_price=a.data.data.cs_price,e.cs_num=a.data.data.cs_num,e.cs_yprice=a.data.data.cs_yprice),e.price=l,e.attrList=u,e.skuBeanList=d,e.collection=p,e.coupon_str=_,"MS"==t.type?e._remain_time(r):(e.pro=r,r.content=r.content.replace(/src/g,"style='width:100%!important;height: auto!important;' src").replace(/<table/g,'<table style="width:100%!important;"'),r.content=(0,i.default)(r.content)),e.is_grade=g,e.active=f,e.$store.state.access_id=s,uni.setStorageSync("access_id",s),e.imgurl=r.img_arr[0],e.num=r.num,e.status=r.status,e.collection_id=o,e.pic=h,e.shop_list=m,e.comments=c||"";var v=uni.getStorageSync("h5_url");e.shareHref=v+"pages/index/share?pages=goodsDetailed&productId="+e.pro_id+"&isfx=true",1==r.is_distribution&&(e.isDistribution=!0,e.shareHref=v+"pages/index/share?pages=goodsDetailed&productId="+e.pro_id+"&isfx=true&fatherId="+r.user_id),e.shareHref2="/pages/goods/goodsDetailed?productId="+e.pro_id,e.sharehrefTitle=e.pro.name,e.shareImg=e.imgurl,e.shareContent=e.pro.name,e.coupon_status=a.data.data.coupon_status,e._spec(),e.loadFlag=!0}else uni.showToast({title:a.data.message,duration:1500,icon:"none"})},error:function(t){e.load=!1}})}function r(e,t){t.access_id?"二维码分享"!=e?"朋友圈"==e?uni.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:t.shareHref,title:t.sharehrefTitle,summary:t.shareContent,imageUrl:t.shareImg,success:function(e){t.fastTap=!0,uni.showToast({title:"分享成功!",icon:"none"})},fail:function(e){t.fastTap=!0,uni.showToast({title:"分享失败!",icon:"none"})}}):"微信"==e&&uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:t.shareHref,title:t.sharehrefTitle,summary:t.shareContent,imageUrl:t.shareImg,success:function(e){t.fastTap=!0,uni.showToast({title:"分享成功!",icon:"none"})},fail:function(e){t.fastTap=!0,uni.showToast({title:"分享失败!",icon:"none"})}}):t.showSaveEWM("app"):uni.navigateTo({url:"../../login/login"})}function s(e,t){console.log("LaiKeTuiShowSaveEWM"),console.log(e);var a={module:"app",action:"getcode",m:"share",proId:t.pro_id,access_id:t.access_id,href:t.shareHref};t.is_jifen&&(a.share_type=2),a.store_type="wx"==e?1:"tt"==e?4:2,uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){200==e.data.code?(t.ewmImg=uni.getStorageSync("endurl")+e.data.imgUrl,t.saveEWM=!0):404==e.data.code?t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../login/login"):uni.showToast({title:e.data.message,duration:1500,icon:"none"})}})}function c(e,t){var a={module:"app",action:"getcode",m:"share_shop",shop_id:t.shop_id,access_id:t.access_id,store_type:2};uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log("-------showSaveEWM----------"),console.log(e),200==e.data.code?(t.ewmImg=uni.getStorageSync("endurl")+e.data.imgUrl,t.saveEWM=!0):404==e.data.code?t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../login/login"):uni.showToast({title:e.data.message,duration:1500,icon:"none"})}})}function u(e){if(e.fastTap){var t={module:"app",action:"addFavorites",access_id:e.access_id,store_type:2};e.is_jifen&&(t.type=2),e.fastTap=!1,setTimeout((function(){e.fastTap=!0}),800),e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../login/login",(function(){e.collection?(t.app="removeFavorites",t.collection=[],t.collection.push(e.collection_id),uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){e.fastTap=!0;var a=t.data,n=a.code,i=a.message;200==n?(e.collection=!1,uni.showToast({title:i,duration:1e3,icon:"none"})):uni.showToast({title:i,duration:1e3,icon:"none"})}})):(t.app="index",t.pro_id=e.pro_id,uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var a=t.data,n=a.code,i=a.message,o=a.collection_id;200==n?(e.collection=!0,e.collection_id=o,uni.showToast({title:"收藏成功！",duration:1e3,icon:"none"})):uni.showToast({title:i,duration:1e3,icon:"none"})}}))}))}}function d(e){if(e.type=2,e.fastTap)if(e.fastTap=!1,e.haveSkuBean){var t={module:"app",action:"product",app:"add_cart",pro_id:e.pro_id,attribute_id:e.haveSkuBean.cid,num:e.numb,type:"addcart",access_id:e.$store.state.access_id};uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){e.fastTap=!0,console.log("加入购物车"),console.log(t);var a=t.data,n=a.code,i=a.data,o=a.message;200==n?(uni.showToast({title:"添加成功，在购物车等您哦~",duration:1e3,icon:"none"}),e.haveSkuBean="",console.log(e._cart_num),e.cart_num(e.numb+e._cart_num),e.allCartNum=e._cart_num,e._mask_false()):uni.showToast({title:o,duration:1500,icon:"none"}),i.cart_id&&(_(i.cart_id,e.$store.state.nCart)||e.$store.state.nCart.push(i.cart_id))},error:function(e){console.log(e)}})}else e.fastTap=!0,e._mask_display()}function l(e){e.couponMask=!0;var t={module:"app",action:"Coupon",app:"pro_coupon",pro_id:e.pro_id,access_id:e.access_id};uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){if(200==t.data.code){var a=t.data.list;e.coupon_list=a}else uni.showToast({title:t.data.message,duration:1500,icon:"none"});e.fastTap=!0},error:function(e){console.log(e)}})}function p(e,t){if(e.fastTap)if(e.fastTap=!1,e.access_id){var a={module:"app",action:"Coupon",app:"receive",access_id:e.access_id,id:t};uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var a=t.data.code;200==a?(uni.showToast({title:"领取成功",duration:1500,icon:"none"}),setTimeout((function(){e.getCoupon()}),1500)):(uni.showToast({title:t.data.message,duration:1500,icon:"none"}),setTimeout((function(){e.getCoupon()}),1500))},error:function(t){e.fastTap=!0}})}else e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../login/login?landing_code=coupon")}function h(e){e.fastTap&&(e.fastTap=!1,e.type=3,e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../../pages/login/login?landing_code=1",(function(){if(e.haveSkuBean){var t=[];t.push({pid:e.pro_id}),t.push({cid:e.haveSkuBean.cid}),t.push({num:e.numb}),t.push({sec_id:e.option.id}),t=JSON.stringify(t),uni.request({data:{module:"app",action:"product",app:"immediately_cart",product:t,access_id:e.access_id},url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(console.log(a),e.clicktimes=[],200==a.data.code){var n="../pay/orderDetailsr?product="+t+"&isDistribution="+e.isDistribution+"&canshu=true&returnR=2";if("pagesB"==e.pages)n="seckillDetailsr?product="+t+"&isDistribution="+e.isDistribution+"&canshu=true&returnR=2";e._mask_f(),uni.navigateTo({url:n}),e.fastTap=!0}else uni.showToast({title:a.data.message,duration:1500,icon:"none"}),setTimeout((function(){e._axios(),e.fastTap=!0}),1500)}})}else e._mask_display(),e.fastTap=!0})))}function f(e){Boolean(e.haveSkuBean)?0==e.num?uni.showToast({title:"库存不足",duration:1e3,icon:"none"}):0!=e.num&&(1==e.type?(e._mask_false(),e.pay_lx("pt")):2==e.type?(e._shopping(),e.pay_lx("pt")):3==e.type&&(e._buy(),e.pay_lx("pt"))):0==e.num?uni.showToast({title:"库存不足",duration:1e3,icon:"none"}):uni.showToast({title:"请选择完整的商品规格！",duration:1e3,icon:"none"})}function g(e){for(var t=e.attrList,a=e.skuBeanList,n=0;n<t.length;n++){for(var i=t[n],o=[],r=0;r<t.length;r++){var s=t[r];if(s.id!=i.id)for(var c=0;c<s.attr.length;c++){var u=s.attr[c];u.enable&&u.select&&o.push(u)}}for(var d=[],l=0;l<a.length;l++){var p=!0,h=a[l];for(r=0;r<o.length;r++){var f=!1;for(c=0;c<h.attributes.length;c++){var g=h.attributes[c];if(o[r].attributeId==g.attributeId&&o[r].id==g.attributeValId){f=!0;break}}p=f&&p}if(p)for(var m=0;m<h.attributes.length;m++){g=h.attributes[m];i.id==g.attributeId&&d.push(g.attributeValId)}}for(var _=0;_<i.attr.length;_++){var v=i.attr[_];v.enable=Number(a[_].count)}}e.attrList=t,e.skuBeanList=a}function m(e,t,a){var n=e.attrList,i=n[a],o=i.attr[t];if(o.enable){for(var r=!o.select,s=0;s<i.attr.length;s++)i.attr[s].select=!1;o.select=r;for(var c=[],u=0;u<n.length;u++)for(var d=0;d<n[u].attr.length;d++)n[u].attr[d].enable&&n[u].attr[d].select&&c.push(n[u].attr[d]);console.log(c,"目前点击的属性");var l=Array.from(c,(function(e){return e.attributeValue}));e.selectedlist=l.join(" ");for(var p=e.skuBeanList,h=[],f=0;f<p.length;f++){for(var g=0,m=0;m<p[f].attributes.length;m++)c.length==p[f].attributes.length?p[f].attributes[m].attributeValId==c[m].id&&g++:"库存清单不存在此属性 ";g==p[f].attributes.length&&h.push(p[f])}for(var _=0;_<c.length;_++)c[_].attributeValue+" ";0!=h.length?(e.num=h[0].count,0==e.num&&uni.showToast({title:"库存不足，请选择其它!",icon:"none",duration:1500}),e.price=h[0].price,e.imgurl!=h[0].imgurl&&(e.loadImg=!0,e.imgurl=h[0].imgurl),e.haveSkuBean=h[0]):(e.num=e.pro.num,e.price=e.ys_price,e.haveSkuBean=""),e.attrList=n,e._spec()}else uni.showToast({title:"库存不足，请选择其它!",icon:"none",duration:1500})}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a].toString();if(n==e)return!0}return!1}function v(e){var t=e.leftTime;setInterval((function(){var a=--t,n=Math.floor(a/60/60/24),i=Math.floor(a/3600-24*n),o=Math.floor((a-60*i*60-24*n*60*60)/60),r=a%60;i<10&&(i="0"+i),o<10&&(o="0"+o),r<10&&(r="0"+r),e.hour=i,e.mniuate=o,e.second=r,e.day=n,e.leftTime<=0&&(e.hour=0,e.mniuate=0,e.second=0,e.day=0)}),1e3)}function b(e){var t={module:"app",action:"login",app:"token",access_id:e.access_id};uni.request({url:uni.getStorageSync("url"),data:t,success:function(t){if(404==t.data.code||0==t.data.login_status)e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../../pages/login/login?landing_code=1");else{var a=0;0==e.brStatus?a=1:1==e.brStatus?a=2:2==e.brStatus?a=3:3==e.brStatus&&(a=-1),uni.redirectTo({url:"../../pagesA/bargain/bargainIng?proId="+e.pro_id+"&attr_id="+e.attr_id+"&order_no="+e.order_no+"&brStatus="+a+"&bargain_id="+e.bargain_id})}}})}}}]);