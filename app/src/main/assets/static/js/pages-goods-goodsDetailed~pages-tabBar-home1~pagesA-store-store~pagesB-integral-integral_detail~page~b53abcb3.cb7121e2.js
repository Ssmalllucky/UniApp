(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-goodsDetailed~pages-tabBar-home1~pagesA-store-store~pagesB-integral-integral_detail~page~b53abcb3"],{"28ec":function(e,t,a){"use strict";(function(e){a("c975"),a("13d5"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,o=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,r=h("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),s=h("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),u=h("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),c=h("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),d=h("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),l=h("script,style");function p(e,t){var a,p,h,f=[],g=e;f.last=function(){return this[this.length-1]};while(e){if(p=!0,f.last()&&l[f.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),(function(e,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(a),""})),v("",f.last());else if(0==e.indexOf("\x3c!--")?(a=e.indexOf("--\x3e"),a>=0&&(t.comment&&t.comment(e.substring(4,a)),e=e.substring(a+3),p=!1)):0==e.indexOf("</")?(h=e.match(n),h&&(e=e.substring(h[0].length),h[0].replace(n,v),p=!1)):0==e.indexOf("<")&&(h=e.match(i),h&&(e=e.substring(h[0].length),h[0].replace(i,_),p=!1)),p){a=e.indexOf("<");var m=a<0?e:e.substring(0,a);e=a<0?"":e.substring(a),t.chars&&t.chars(m)}if(e==g)throw"Parse Error: "+e;g=e}function _(e,a,i,n){if(a=a.toLowerCase(),s[a])while(f.last()&&u[f.last()])v("",f.last());if(c[a]&&f.last()==a&&v("",a),n=r[a]||!!n,n||f.push(a),t.start){var l=[];i.replace(o,(function(e,t){var a=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:d[t]?t:"";l.push({name:t,value:a,escaped:a.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(a,l,n)}}function v(e,a){if(a){for(i=f.length-1;i>=0;i--)if(f[i]==a)break}else var i=0;if(i>=0){for(var n=f.length-1;n>=i;n--)t.end&&t.end(f[n]);f.length=i}}v()}function h(e){for(var t={},a=e.split(","),i=0;i<a.length;i++)t[a[i]]=!0;return t}function f(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}function g(e){return e.reduce((function(e,t){var a=t.value,i=t.name;return e[i]?e[i]=e[i]+" "+a:e[i]=a,e}),{})}function m(t){t=f(t);var a=[],i={node:"root",children:[]};return p(t,{start:function(e,t,n){var o={name:e};if(0!==t.length&&(o.attrs=g(t)),n){var r=a[0]||i;r.children||(r.children=[]),r.children.push(o)}else a.unshift(o)},end:function(t){var n=a.shift();if(n.name!==t&&e.error("invalid state: mismatch end tag"),0===a.length)i.children.push(n);else{var o=a[0];o.children||(o.children=[]),o.children.push(n)}},chars:function(e){var t={type:"text",text:e};if(0===a.length)i.children.push(t);else{var n=a[0];n.children||(n.children=[]),n.children.push(t)}},comment:function(e){var t={node:"comment",text:e},i=a[0];i.children||(i.children=[]),i.children.push(t)}}),i.children}var _=m;t.default=_}).call(this,a("5a52")["default"])},"72da":function(e,t,a){"use strict";(function(e){var i=a("ee27");a("a630"),a("a15b"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.LaiKeTui_axios=o,t.LaiKeTuiInvite=r,t.LaiKeTuiShowSaveEWM=s,t.LaiKeTuiShopEWM=u,t.LaiKeTui_collection=c,t.LaiKeTui_shopping=d,t.LaiKeTuiGetCoupon=l,t.LaiKeTui_receive=p,t.LaiKeTui_buy_handle=h,t.LaiKeTui_confirm=f,t.LaiKeTui_spec=g,t.LaiKeTuiShowState=m,t.in_array=_,t.LaiKeTuiSetTimeData=v,t.LaiKeTuiToBr=b;var n=i(a("28ec"));function o(e){var t={module:"app",action:"product",app:"index",pro_id:e.pro_id,access_id:e.access_id};e.bargain?(t.type="KJ",t.attr_id=e.attr_id,t.bargain_id=e.bargain_id):e.seckill&&(t.type="MS",t.navType=e.navType,t.id=e.id),uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(uni.hideLoading(),a&&a.data&&a.data.data&&(e.login_status=a.data.data.login_status),e.load=!1,200==a.data.code){var i=a.data.data,o=i.collection_id,r=i.pro,s=i.access_id,u=i.comments,c=i.attrList,d=i.skuBeanList,l=i.qj_price,p=i.type,h=i.logo,f=i.active,g=i.is_grade,m=i.shop_list,_=i.coupon_str;e.ys_price=l,e.bargain&&(e.cs_price=a.data.data.cs_price,e.cs_num=a.data.data.cs_num,e.cs_yprice=a.data.data.cs_yprice),e.price=l,e.attrList=c,e.skuBeanList=d,e.collection=p,e.coupon_str=_,"MS"==t.type?e._remain_time(r):(e.pro=r,r.content=r.content.replace(/src/g,"style='width:100%!important;height: auto!important;' src").replace(/<table/g,'<table style="width:100%!important;"'),r.content=(0,n.default)(r.content)),e.is_grade=g,e.active=f,e.$store.state.access_id=s,uni.setStorageSync("access_id",s),e.imgurl=r.img_arr[0],e.num=r.num,e.status=r.status,e.collection_id=o,e.pic=h,e.shop_list=m,e.comments=u||"";var v=uni.getStorageSync("h5_url");e.shareHref=v+"pages/index/share?pages=goodsDetailed&productId="+e.pro_id+"&isfx=true",1==r.is_distribution&&(e.isDistribution=!0,e.shareHref=v+"pages/index/share?pages=goodsDetailed&productId="+e.pro_id+"&isfx=true&fatherId="+r.user_id),e.shareHref2="/pages/goods/goodsDetailed?productId="+e.pro_id,e.sharehrefTitle=e.pro.name,e.shareImg=e.imgurl,e.shareContent=e.pro.name,e.coupon_status=a.data.data.coupon_status,e._spec(),e.loadFlag=!0}else uni.showToast({title:a.data.message,duration:1500,icon:"none"})},error:function(t){e.load=!1}})}function r(e,t){t.access_id?"二维码分享"!=e?"朋友圈"==e?uni.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:t.shareHref,title:t.sharehrefTitle,summary:t.shareContent,imageUrl:t.shareImg,success:function(e){t.fastTap=!0,uni.showToast({title:"分享成功!",icon:"none"})},fail:function(e){t.fastTap=!0,uni.showToast({title:"分享失败!",icon:"none"})}}):"微信"==e&&uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:t.shareHref,title:t.sharehrefTitle,summary:t.shareContent,imageUrl:t.shareImg,success:function(e){t.fastTap=!0,uni.showToast({title:"分享成功!",icon:"none"})},fail:function(e){t.fastTap=!0,uni.showToast({title:"分享失败!",icon:"none"})}}):t.showSaveEWM("app"):uni.navigateTo({url:"../../login/login"})}function s(t,a){e.log("LaiKeTuiShowSaveEWM"),e.log(t);var i={module:"app",action:"getcode",m:"share",proId:a.pro_id,access_id:a.access_id,href:a.shareHref};a.is_jifen&&(i.share_type=2),i.store_type="wx"==t?1:"tt"==t?4:2,uni.request({data:i,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){200==e.data.code?(a.ewmImg=uni.getStorageSync("endurl")+e.data.imgUrl,a.saveEWM=!0):404==e.data.code?a.$refs.lktAuthorizeComp.handleAfterAuth(a,"../login/login"):uni.showToast({title:e.data.message,duration:1500,icon:"none"})}})}function u(t,a){var i={module:"app",action:"getcode",m:"share_shop",shop_id:a.shop_id,access_id:a.access_id,store_type:2};uni.request({data:i,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){e.log("-------showSaveEWM----------"),e.log(t),200==t.data.code?(a.ewmImg=uni.getStorageSync("endurl")+t.data.imgUrl,a.saveEWM=!0):404==t.data.code?a.$refs.lktAuthorizeComp.handleAfterAuth(a,"../login/login"):uni.showToast({title:t.data.message,duration:1500,icon:"none"})}})}function c(e){if(e.fastTap){var t={module:"app",action:"addFavorites",access_id:e.access_id,store_type:2};e.is_jifen&&(t.type=2),e.fastTap=!1,setTimeout((function(){e.fastTap=!0}),800),e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../login/login",(function(){e.collection?(t.app="removeFavorites",t.collection=[],t.collection.push(e.collection_id),uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){e.fastTap=!0;var a=t.data,i=a.code,n=a.message;200==i?(e.collection=!1,uni.showToast({title:n,duration:1e3,icon:"none"})):uni.showToast({title:n,duration:1e3,icon:"none"})}})):(t.app="index",t.pro_id=e.pro_id,uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var a=t.data,i=a.code,n=a.message,o=a.collection_id;200==i?(e.collection=!0,e.collection_id=o,uni.showToast({title:"收藏成功！",duration:1e3,icon:"none"})):uni.showToast({title:n,duration:1e3,icon:"none"})}}))}))}}function d(t){if(t.type=2,t.fastTap)if(t.fastTap=!1,t.haveSkuBean){var a={module:"app",action:"product",app:"add_cart",pro_id:t.pro_id,attribute_id:t.haveSkuBean.cid,num:t.numb,type:"addcart",access_id:t.$store.state.access_id};uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){t.fastTap=!0,e.log("加入购物车"),e.log(a);var i=a.data,n=i.code,o=i.data,r=i.message;200==n?(uni.showToast({title:"添加成功，在购物车等您哦~",duration:1e3,icon:"none"}),t.haveSkuBean="",e.log(t._cart_num),t.cart_num(t.numb+t._cart_num),t.allCartNum=t._cart_num,t._mask_false()):uni.showToast({title:r,duration:1500,icon:"none"}),o.cart_id&&(_(o.cart_id,t.$store.state.nCart)||t.$store.state.nCart.push(o.cart_id))},error:function(t){e.log(t)}})}else t.fastTap=!0,t._mask_display()}function l(t){t.couponMask=!0;var a={module:"app",action:"Coupon",app:"pro_coupon",pro_id:t.pro_id,access_id:t.access_id};uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){if(200==e.data.code){var a=e.data.list;t.coupon_list=a}else uni.showToast({title:e.data.message,duration:1500,icon:"none"});t.fastTap=!0},error:function(t){e.log(t)}})}function p(e,t){if(e.fastTap)if(e.fastTap=!1,e.access_id){var a={module:"app",action:"Coupon",app:"receive",access_id:e.access_id,id:t};uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var a=t.data.code;200==a?(uni.showToast({title:"领取成功",duration:1500,icon:"none"}),setTimeout((function(){e.getCoupon()}),1500)):(uni.showToast({title:t.data.message,duration:1500,icon:"none"}),setTimeout((function(){e.getCoupon()}),1500))},error:function(t){e.fastTap=!0}})}else e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../login/login?landing_code=coupon")}function h(t){t.fastTap&&(t.fastTap=!1,t.type=3,t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../../pages/login/login?landing_code=1",(function(){if(t.haveSkuBean){var a=[];a.push({pid:t.pro_id}),a.push({cid:t.haveSkuBean.cid}),a.push({num:t.numb}),a.push({sec_id:t.option.id}),a=JSON.stringify(a),uni.request({data:{module:"app",action:"product",app:"immediately_cart",product:a,access_id:t.access_id},url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(i){if(e.log(i),t.clicktimes=[],200==i.data.code){var n="../pay/orderDetailsr?product="+a+"&isDistribution="+t.isDistribution+"&canshu=true&returnR=2";if("pagesB"==t.pages)n="seckillDetailsr?product="+a+"&isDistribution="+t.isDistribution+"&canshu=true&returnR=2";t._mask_f(),uni.navigateTo({url:n}),t.fastTap=!0}else uni.showToast({title:i.data.message,duration:1500,icon:"none"}),setTimeout((function(){t._axios(),t.fastTap=!0}),1500)}})}else t._mask_display(),t.fastTap=!0})))}function f(e){Boolean(e.haveSkuBean)?0==e.num?uni.showToast({title:"库存不足",duration:1e3,icon:"none"}):0!=e.num&&(1==e.type?(e._mask_false(),e.pay_lx("pt")):2==e.type?(e._shopping(),e.pay_lx("pt")):3==e.type&&(e._buy(),e.pay_lx("pt"))):0==e.num?uni.showToast({title:"库存不足",duration:1e3,icon:"none"}):uni.showToast({title:"请选择完整的商品规格！",duration:1e3,icon:"none"})}function g(e){for(var t=e.attrList,a=e.skuBeanList,i=0;i<t.length;i++){for(var n=t[i],o=[],r=0;r<t.length;r++){var s=t[r];if(s.id!=n.id)for(var u=0;u<s.attr.length;u++){var c=s.attr[u];c.enable&&c.select&&o.push(c)}}for(var d=[],l=0;l<a.length;l++){var p=!0,h=a[l];for(r=0;r<o.length;r++){var f=!1;for(u=0;u<h.attributes.length;u++){var g=h.attributes[u];if(o[r].attributeId==g.attributeId&&o[r].id==g.attributeValId){f=!0;break}}p=f&&p}if(p)for(var m=0;m<h.attributes.length;m++){g=h.attributes[m];n.id==g.attributeId&&d.push(g.attributeValId)}}for(var _=0;_<n.attr.length;_++){var v=n.attr[_];v.enable=Number(a[_].count)}}e.attrList=t,e.skuBeanList=a}function m(t,a,i){var n=t.attrList,o=n[i],r=o.attr[a];if(r.enable){for(var s=!r.select,u=0;u<o.attr.length;u++)o.attr[u].select=!1;r.select=s;for(var c=[],d=0;d<n.length;d++)for(var l=0;l<n[d].attr.length;l++)n[d].attr[l].enable&&n[d].attr[l].select&&c.push(n[d].attr[l]);e.log(c,"目前点击的属性");var p=Array.from(c,(function(e){return e.attributeValue}));t.selectedlist=p.join(" ");for(var h=t.skuBeanList,f=[],g=0;g<h.length;g++){for(var m=0,_=0;_<h[g].attributes.length;_++)c.length==h[g].attributes.length?h[g].attributes[_].attributeValId==c[_].id&&m++:"库存清单不存在此属性 ";m==h[g].attributes.length&&f.push(h[g])}for(var v=0;v<c.length;v++)c[v].attributeValue+" ";0!=f.length?(t.num=f[0].count,0==t.num&&uni.showToast({title:"库存不足，请选择其它!",icon:"none",duration:1500}),t.price=f[0].price,t.imgurl!=f[0].imgurl&&(t.loadImg=!0,t.imgurl=f[0].imgurl),t.haveSkuBean=f[0]):(t.num=t.pro.num,t.price=t.ys_price,t.haveSkuBean=""),t.attrList=n,t._spec()}else uni.showToast({title:"库存不足，请选择其它!",icon:"none",duration:1500})}function _(e,t){for(var a=0;a<t.length;a++){var i=t[a].toString();if(i==e)return!0}return!1}function v(e){var t=e.leftTime;setInterval((function(){var a=--t,i=Math.floor(a/60/60/24),n=Math.floor(a/3600-24*i),o=Math.floor((a-60*n*60-24*i*60*60)/60),r=a%60;n<10&&(n="0"+n),o<10&&(o="0"+o),r<10&&(r="0"+r),e.hour=n,e.mniuate=o,e.second=r,e.day=i,e.leftTime<=0&&(e.hour=0,e.mniuate=0,e.second=0,e.day=0)}),1e3)}function b(e){var t={module:"app",action:"login",app:"token",access_id:e.access_id};uni.request({url:uni.getStorageSync("url"),data:t,success:function(t){if(404==t.data.code||0==t.data.login_status)e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../../pages/login/login?landing_code=1");else{var a=0;0==e.brStatus?a=1:1==e.brStatus?a=2:2==e.brStatus?a=3:3==e.brStatus&&(a=-1),uni.redirectTo({url:"../../pagesA/bargain/bargainIng?proId="+e.pro_id+"&attr_id="+e.attr_id+"&order_no="+e.order_no+"&brStatus="+a+"&bargain_id="+e.bargain_id})}}})}}).call(this,a("5a52")["default"])}}]);