(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-goods"],{2541:function(t,a,i){"use strict";var e=i("ee27");i("99af"),i("c975"),i("d3b7"),i("25f0"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=e(i("f3f3")),n=e(i("8249")),o=i("2f62"),d={data:function(){return{fastTap:!0,shopImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/shopping_l2x.png",closed:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/guanbi2x.png",noImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/noFind.png",serchimg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/searchh.png",title:"",cid:"",loadingType:0,page:1,placeholder:"请输入商品名称",placeholder1:"",placeStyle:"color:#999999;font-size: 26upx",searchtxt:"",list:"",jian_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jian2x.png",jian_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jianhui2x.png",jia_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jia+2x.png",jia_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/add+2x.png",attribute_id:"",attrList:"",skuBeanList:"",mask_display:!1,ys_price:"",num:"",price:"",imgurl:"",scan_d:"",pro:"",load_next:!0,haveSkuBean:"",numb:1,access_id:"",proid:"",msg:"",shop_id:"",span_id:"",brand_id:"",app:"listdetail"}},onLoad:function(t){console.log(t),this.cid=t.cid,this.span_id=t.span_id,this.brand_id=t.brand_id,this.title=t.name,this.access_id=uni.getStorageSync("access_id")?uni.getStorageSync("access_id"):this.$store.state.access_id,this.shop_id=t.shop_id,this._axios()},onReachBottom:function(){var t=this;if(t.load_next){if(uni.showLoading({title:"请稍后..."}),0!=t.loadingType)return;t.loadingType=1,t.page+=1,t.cid&&(data={cid:this.cid,module:"app",action:"search",app:"listdetail",page:this.page,pro:""}),t.span_id&&(data={span_id:t.span_id,module:"app",action:"search",app:"clickSou",page:this.page,pro:""}),t.brand_id&&(data={span_id:t.brand_id,module:"app",action:"search",app:"clickSou",page:this.page,pro:""}),t.shop_id&&(data.shop_id=t.shop_id),uni.request({data:data,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){uni.hideLoading(),a.data.pro.length>0?(t.list=t.list.concat(a.data.pro),t.loadingType=0):(t.load_next=!1,uni.showToast({title:"没有更多了",duration:1500,icon:"none"}),t.loadingType=2)},error:function(t){console.log(t)},complete:function(){uni.hideLoading()}})}else uni.showToast({title:"没有更多了",duration:1500,icon:"none"})},methods:(0,s.default)({_placeholder:function(){this.placeholder1=this.placeholder},_placeholder1:function(){this.placeholder1=""},_axios:function(){uni.showLoading({title:"请稍后..."});var t=this,a={};t.cid&&(a={cid:this.cid,module:"app",action:"search",app:"listdetail",page:this.page,pro:""}),t.span_id&&(a={span_id:t.span_id,module:"app",action:"search",app:"clickSou",page:this.page,pro:""}),t.brand_id&&(a={span_id:t.brand_id,module:"app",action:"search",app:"clickSou",page:this.page,pro:""}),this.shop_id&&(a.shop_id=this.shop_id),uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(console.log(a),uni.hideLoading(),200==a.data.code){var i=a.data,e=i.pro,s=i.pname;t.list=e,console.log(t.list),t.title=s}else uni.showToast({title:a.data.message,duration:1500,icon:"none"})},error:function(t){console.log(t)},complete:function(){uni.hideLoading()}})},_goods:function(t){this.pro_id(t),uni.navigateTo({url:"../goods/goodsDetailed?pro_id="+t})},shopping_j:function(t){var a=this;if(this.fastTap){this.fastTap=!1,this.proid=t;var i={module:"app",action:"product",app:"index",pro_id:t};uni.request({data:i,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){if(a.fastTap=!0,200==t.data.code){var i=t.data.data,e=(i.collection_id,i.pro),s=(i.comments,i.attrList),n=i.skuBeanList,o=i.qj_price,d=i.type;a.ys_price=o,a.price=o,a.attrList=s,a.skuBeanList=n,a.collection=d,a.imgurl=e.img_arr[0],a.num=e.num,a._spec(),a._mask_display()}else uni.showToast({title:t.data.message,duration:1500,icon:"none"})},error:function(t){a.fastTap=!0}})}},_mask_display:function(){if(this.mask_display=!0,!this.haveSkuBean)for(var t=0;t<this.attrList.length;t++){var a=this.attrList[t].attr;1==a.length&&this.showState(0,t)}},_mask_false:function(){if(this.numb=1,this.mask_display=!1,!this.haveSkuBean)for(var t=0;t<this.attrList.length;t++){var a=this.attrList[t].attr;1==a.length&&this.showState(0,t)}},_mask_f:function(){this.haveSkuBean="",this._mask_false(),this.mask_display=!1},_confirm:function(){Boolean(this.haveSkuBean)?0==this.num?uni.showToast({title:"库存不足",duration:1e3,icon:"none"}):0!=this.num&&this._shopping():0==this.num?uni.showToast({title:"库存不足",duration:1e3,icon:"none"}):uni.showToast({title:"请选择完整的商品规格！",duration:1e3,icon:"none"})},_spec:function(){for(var t=this.attrList,a=0;a<t.length;a++){for(var i=t[a],e=[],s=0;s<t.length;s++){var n=t[s];if(n.id!=i.id)for(var o=0;o<n.attr.length;o++){var d=n.attr[o];d.enable&&d.select&&e.push(d)}}for(var r=[],c=this.skuBeanList,l=0;l<c.length;l++){var u=!0,h=c[l];for(s=0;s<e.length;s++){var p=!1;for(o=0;o<h.attributes.length;o++){var _=h.attributes[o];if(e[s].attributeId==_.attributeId&&e[s].id==_.attributeValId){p=!0;break}}u=p&&u}if(u)for(var g=0;g<h.attributes.length;g++){_=h.attributes[g];i.id==_.attributeId&&r.push(_.attributeValId)}}for(var f=r,m=0;m<i.attr.length;m++){var v=i.attr[m];v.enable=-1!=f.indexOf(v.id)}}this.attrList=t,this.skuBeanList=c},showState:function(t,a){var i=this.attrList,e=i[a],s=e.attr[t];if(s.enable){for(var n=!s.select,o=0;o<e.attr.length;o++)e.attr[o].select=!1;s.select=n;for(var d=[],r=0;r<i.length;r++)for(var c=0;c<i[r].attr.length;c++)i[r].attr[c].enable&&i[r].attr[c].select&&d.push(i[r].attr[c]);for(var l=this.skuBeanList,u=[],h=0;h<l.length;h++){for(var p=0,_=0;_<l[h].attributes.length;_++)d.length==l[h].attributes.length?l[h].attributes[_].attributeValId==d[_].id&&p++:"库存清单不存在此属性 ";p==l[h].attributes.length&&u.push(l[h])}for(var g=0;g<d.length;g++)d[g].attributeValue+" ";0!=u.length?(this.num=u[0].count,this.price=u[0].price,this.imgurl=u[0].imgurl,this.haveSkuBean=u[0]):(this.num=this.pro.num,this.price=this.ys_price,this.haveSkuBean=""),this.attrList=i,this._spec()}},in_array:function(t,a){for(var i=0;i<a.length;i++){var e=a[i].toString();if(e==t)return!0}return!1},_shopping:function(){var t=this;if(this.haveSkuBean){var a={module:"app",action:"product",app:"add_cart",pro_id:this.proid,attribute_id:this.haveSkuBean.cid,num:this.numb,type:"addcart"};this.access_id?a.access_id=this.access_id:a.access_id="",this.$store.state.nCart?a.cart_id=this.$store.state.nCart:a.cart_id="",uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){var i=a.data,e=i.code,s=i.data;i.message;200==e?(uni.showToast({title:"添加成功，在购物车等您哦~",duration:1e3,icon:"none"}),t.haveSkuBean="",t._mask_false()):uni.showToast({title:a.data.message,duration:1500,icon:"none"}),s.cart_id&&(t.in_array(s.cart_id,t.$store.state.nCart)||t.$store.state.nCart.push(s.cart_id))},error:function(t){console.log(t)}})}else this._mask_display()}},(0,o.mapMutations)({pro_id:"SET_PRO_ID",cindex:"SET_CINDEX"})),components:{Heads:n.default}};a.default=d},2939:function(t,a,i){var e=i("9d62");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=i("4f06").default;s("75f41978",e,!0,{sourceMap:!1,shadowMode:!1})},"3c4b":function(t,a,i){"use strict";i.r(a);var e=i("2541"),s=i.n(e);for(var n in e)"default"!==n&&function(t){i.d(a,t,(function(){return e[t]}))}(n);a["default"]=s.a},"56e2":function(t,a,i){"use strict";var e=i("2939"),s=i.n(e);s.a},"8adb":function(t,a,i){"use strict";i.r(a);var e=i("e654"),s=i("3c4b");for(var n in s)"default"!==n&&function(t){i.d(a,t,(function(){return s[t]}))}(n);i("56e2");var o,d=i("f0c5"),r=Object(d["a"])(s["default"],e["b"],e["c"],!1,null,"ac277d20",null,!1,e["a"],o);a["default"]=r.exports},"9d62":function(t,a,i){var e=i("24fb");a=e(!1),a.push([t.i,"/* 遮罩层规格样式 */.conten[data-v-ac277d20]{background-color:#f8f8f8;height:100vh}.home_navigation[data-v-ac277d20]{border-bottom:none}.home_input[data-v-ac277d20]{width:%?608?%}@-webkit-keyframes move1-data-v-ac277d20{from{margin-top:%?500?%}to{margin-top:%?0?%}}@keyframes move1-data-v-ac277d20{from{margin-top:%?500?%}to{margin-top:%?0?%}}.pubuliu[data-v-ac277d20]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:100%}.goodsLeftList[data-v-ac277d20]{margin:0 %?10?% 0 %?40?%;width:48%;-webkit-animation:move1-data-v-ac277d20 .5s 1 linear;animation:move1-data-v-ac277d20 .5s 1 linear}.goodsRightList[data-v-ac277d20]{margin:0 %?40?% 0 %?10?%;width:48%;-webkit-animation:move1-data-v-ac277d20 .6s 1 linear;animation:move1-data-v-ac277d20 .6s 1 linear}.home_input uni-input[data-v-ac277d20]{font-size:%?26?%!important;border-radius:%?30?%;border:%?2?% solid #fd9d1c}.search_btn[data-v-ac277d20]{font-size:%?28?%;background-color:#fd9d1c;width:20%;padding:%?13?%;text-align:center;border-radius:%?30?%}.allgoods_name[data-v-ac277d20]{font-size:%?32?%}.mask[data-v-ac277d20]{height:100vh;width:100%;background-color:rgba(0,0,0,.5);position:fixed;top:0;left:0;z-index:32}.cha[data-v-ac277d20]{width:%?32?%;height:%?32?%;position:absolute;top:0;right:0}.back[data-v-ac277d20]{background-color:#fff}.orange[data-v-ac277d20]{background-color:#020202;color:#fff}.select[data-v-ac277d20]{background-color:#eee}.mask_num[data-v-ac277d20]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center}.allgoods[data-v-ac277d20]{padding-bottom:%?10?%;/* display: flex; flex-wrap: wrap; */-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;background:#f8f8f8}.allgoods_li[data-v-ac277d20]{margin-top:%?10?%;width:100%;border:0!important;padding:%?52?% %?22?% %?26?%;text-align:center;\r\n\t/* float: left; */margin-left:1%;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;border-radius:%?30?%;background-color:#fff}.allgoods_li>div[data-v-ac277d20]{margin-top:%?16?%}.allgoods_li[data-v-ac277d20]:nth-of-type(2n){\r\n\t/* border-top: 10upx solid #f8f8f8; */border-bottom:%?10?% solid #f8f8f8;border-right:none;border-left:%?10?% solid #f8f8f8}.price[data-v-ac277d20]{font-size:%?28?%;color:red}.sales[data-v-ac277d20]{font-size:%?22?%;color:#9d9d9d}.allgoods_li[data-v-ac277d20]:nth-of-type(2n+1){\r\n\t/* border-top: 10upx solid #f8f8f8; */border-bottom:%?10?% solid #f8f8f8;border-right:%?10?% solid #f8f8f8;border-left:none}.allgoods_li[data-v-ac277d20]:nth-last-child(2){margin-right:%?10?%}.allgoods_p[data-v-ac277d20]{font-size:%?24?%;color:#999;margin:%?8?% 0 %?20?% 0;height:%?32?%}.allgoods_name[data-v-ac277d20]{font-size:%?28?%;line-height:%?28?%;color:#020202}.allgoods_subtitle[data-v-ac277d20]{color:#999;font-size:%?24?%;line-height:%?24?%;padding-top:%?14?%}.allgoods>li>img[data-v-ac277d20]{width:100%;height:auto;vertical-align:top;border-radius:%?30?%;margin-bottom:%?22?%}.search_no[data-v-ac277d20]{padding-top:%?260?%;text-align:center}.search_no .font_14[data-v-ac277d20]{padding-bottom:2%}.search_no .img[data-v-ac277d20]{width:%?200?%;height:%?200?%}.search_no>.span[data-v-ac277d20]{color:#888}.red[data-v-ac277d20]{color:red}.sales~.img[data-v-ac277d20]{width:%?34?%;height:%?34?%;margin-right:%?20?%}",""]),t.exports=a},e654:function(t,a,i){"use strict";var e,s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"conten"},[i("heads",{attrs:{title:t.title,border:!0}}),i("div",{ref:"box",staticClass:"conten"},[i("div",{staticClass:"home_navigation"},[i("div",{staticClass:"home_input"},[i("img",{staticClass:"searchImg",attrs:{src:t.serchimg,alt:""}}),i("v-uni-input",{attrs:{type:"text",placeholder:t.placeholder1,id:"input","placeholder-style":t.placeStyle,name:"sourch"},on:{blur:function(a){arguments[0]=a=t.$handleEvent(a),t._placeholder()},focus:function(a){arguments[0]=a=t.$handleEvent(a),t._placeholder1()}},model:{value:t.searchtxt,callback:function(a){t.searchtxt="string"===typeof a?a.trim():a},expression:"searchtxt"}})],1),i("div",{staticClass:"search_btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t._search.apply(void 0,arguments)}}},[t._v("搜索")])]),t.list.length>0?i("div",{staticClass:"pubuliu"},[t.list.length>0?i("ul",{staticClass:"allgoods goodsLeftList"},t._l(t.list,(function(a,e){return e%2==0?i("li",{key:e,staticClass:"allgoods_li"},[e%2==0?i("img",{attrs:{src:a.imgurl,mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t._goods(a.id)}}}):t._e(),e%2==0?i("p",{staticClass:"allgoods_name",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t._goods(a.id)}}},[t._v(t._s(a.name))]):t._e(),e%2==0?i("p",{staticClass:"allgoods_subtitle"},[t._v(t._s(a.subtitle))]):t._e(),e%2==0?i("div",[i("span",{staticClass:"price"},[t._v("￥"+t._s(a.price_yh))]),i("span",{staticClass:"sales"},[t._v("销量："+t._s(a.volume))]),i("img",{staticClass:"img",attrs:{src:t.shopImg},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.shopping_j(a.id)}}})]):t._e()]):t._e()})),0):t._e(),t.list.length>0?i("ul",{staticClass:"allgoods goodsRightList"},t._l(t.list,(function(a,e){return e%2==1?i("li",{key:e,staticClass:"allgoods_li"},[e%2==1?i("img",{attrs:{src:a.imgurl,mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t._goods(a.id)}}}):t._e(),e%2==1?i("p",{staticClass:"allgoods_name",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t._goods(a.id)}}},[t._v(t._s(a.name))]):t._e(),e%2==1?i("p",{staticClass:"allgoods_subtitle"},[t._v(t._s(a.subtitle))]):t._e(),e%2==1?i("div",[i("span",{staticClass:"price"},[t._v("￥"+t._s(a.price_yh))]),i("span",{staticClass:"sales"},[t._v("销量："+t._s(a.volume))]),i("img",{staticClass:"img",attrs:{src:t.shopImg},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.shopping_j(a.id)}}})]):t._e()]):t._e()})),0):t._e()]):i("div",{staticClass:"relative"},[i("div",{staticClass:"search_no"},[i("div",{staticClass:"font_14"},[i("img",{staticClass:"img",attrs:{src:t.noImg}})]),i("span",{staticClass:"span"},[t._v("暂时还没有本类商品哦！")])])])]),t.mask_display?i("div",{staticClass:"mask"},[i("div",{staticClass:"mask_d"},[i("div",{staticClass:"mask_guige"},[i("div",{staticClass:"mask_one"},[i("div",[i("img",{staticClass:"shangp",attrs:{src:t.imgurl}})]),i("div",{staticClass:"mask_pric"},[i("p",{staticClass:"red"},[t._v("￥"),i("span",[t._v(t._s(t.price))])]),i("p",[t._v("库存"+t._s(t.num))])]),i("img",{staticClass:"cha",attrs:{src:t.closed},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t._mask_f()}}})]),i("div",{staticClass:"mask_over"},[t._l(t.attrList,(function(a,e){return i("div",{key:e,staticClass:"mask_two"},[i("p",[t._v(t._s(a.attrName))]),i("ul",t._l(a.attr,(function(a,s){return i("li",{key:s,class:[a.enable?a.select?"orange":"select":"back"],on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showState(s,e)}}},[t._v(t._s(a.attributeValue))])})),0)])})),i("div",{staticClass:"mask_num"},[i("p",[t._v("购买数量")]),i("div",{staticClass:"numb"},[i("img",{attrs:{src:1==t.numb?t.jian_hui:t.jian_hei},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.numb>1&&Boolean(t.haveSkuBean)?t.numb--:t.numb}}}),i("i",[t._v(t._s(t.numb))]),i("img",{attrs:{src:t.numb<t.num?t.jia_hei:t.jia_hui},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.numb<t.num&&Boolean(t.haveSkuBean)&&t.numb++}}})])])],2)]),i("div",{staticStyle:{height:"98upx"}},[i("div",{staticClass:"mask_quren",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t._confirm.apply(void 0,arguments)}}},[t._v("确认")])])])]):t._e()],1)},n=[];i.d(a,"b",(function(){return s})),i.d(a,"c",(function(){return n})),i.d(a,"a",(function(){return e}))}}]);