(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-myWallet-recharge"],{"257b":function(e,t,i){"use strict";var a,n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("lktauthorize",{ref:"lktAuthorizeComp",on:{pChangeLoginStatus:function(t){arguments[0]=t=e.$handleEvent(t),e.changeLoginStatus.apply(void 0,arguments)}}}),i("heads",{attrs:{title:e.title}}),i("div",{staticClass:"recharge_ts"},[e._v("充值以后可以使用余额进行交易支付")]),i("div",{staticClass:"recharge_money"},[i("span",{staticClass:"span"},[e._v("充值金额")]),i("v-uni-input",{attrs:{"placeholder-style":"color: #b8b8b8;",type:"digit",min:"0.01",maxlength:"9",value:e.price,placeholder:e.rechargeTitle},on:{blur:function(t){arguments[0]=t=e.$handleEvent(t),e._money.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e._checkValue.apply(void 0,arguments)}}})],1),i("ul",{staticClass:"choose_ul"},[i("li",{staticClass:"pay"},[e._v("请选择支付方式")]),1==e.open_wxpay?i("li",{staticClass:"pay",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._pay(1)}}},[i("div",{staticClass:"pay_div"},[i("img",{staticClass:"pay_img",attrs:{src:e.pay[1].img}}),i("p",[e._v("微信支付")])]),i("img",{staticClass:"quan_img",attrs:{src:e.quan_hei}})]):e._e()]),i("div",{staticClass:"setup-buttom",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pay1()}}},[e._v("立即充值")])],1)},o=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}))},"3e92":function(e,t,i){var a=i("9a84");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("8f33b78e",a,!0,{sourceMap:!1,shadowMode:!1})},"4e5a":function(e,t,i){"use strict";i.r(t);var a=i("542f"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"53b7":function(e,t,i){"use strict";i.r(t);var a=i("257b"),n=i("4e5a");for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("dcea");var s,c=i("f0c5"),r=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"6d1a1e04",null,!1,a["a"],s);t["default"]=r.exports},"542f":function(e,t,i){"use strict";var a=i("ee27");i("99af"),i("a9e3"),i("b680"),i("d3b7"),i("ac1f"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var n=a(i("c964")),o=a(i("8249")),s=(i("a251"),{data:function(){return{open_alipay:!1,open_wxpay:!1,title:"充值",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehei2x.png",pay_bd:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/baiduzhifu2x.png",pay_zhifub:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",pay_weix:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",pay:[{img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",name:"支付宝"},{img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",name:"微信支付"}],pay_index:-1,pay_style:"",price:"",enterPay:!1,access_id:"",fastTap:!0,pay_provider:"",aliPayStatue:!1,wxPayStatue:!1,order_list:"",code:"",firstFlag:!0,value_inp:"",min_amount:"",rechargeTitle:"",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",payment:{}}},mounted:function(){var e=this;e.$nextTick((function(){e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../login/login?landing_code=1",(function(){e.access_id=uni.getStorageSync("access_id")?uni.getStorageSync("access_id"):e.$store.state.access_id,e._pay(1),e._pay(1),e._axios()}))}))},onShow:function(){var e=window.location.href;if(console.log("当前地址="+e),e.split("?").length>1){var t=e.split("?")[1],i=t.split("&");for(var a in i)"String"!=typeof i[a]&&"string"!=typeof i[a]||"code"==i[a].substring(0,4)&&(t=i[a].substring(5),this.code=t);console.log("code="+this.code)}console.log("code="+this.code),""==this.code&&this.toUrl()},watch:{price:function(e,t){this.$nextTick((function(){if(e>.01)if(0==Math.abs(e-t)){this.enterPay=!0;var i=Number(e);isNaN(i)?this.price="0":this.price=i}else if(Math.abs(e-t)<.01){this.enterPay=!0;var a=Number(e).toFixed(2);isNaN(a)?this.price="0":this.price=a}else{this.enterPay=!0;var n=Number(e);isNaN(n)?this.price="0":this.price=n}else this.enterPay=!1}))}},methods:{isPayShow:function(){console.log("============>");var e=this;1==e.payment.jsapi_wechat&&(e.open_wxpay=!0),console.log("############"),console.log(e.payment),console.log("============>")},changeLoginStatus:function(){var e=this;e.access_id=uni.getStorageSync("access_id"),e._axios()},_back:function(){uni.navigateBack({delta:1})},_axios:function(){var e=this,t={module:"app",action:"recharge",app:"index",access_id:this.access_id};uni.request({data:t,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){200==t.data.code&&(e.min_amount=t.data.min_cz,e.payment=t.data.payment,e.rechargeTitle="金额不小于".concat(e.min_amount,"元 !"),e.isPayShow())}})},_money:function(e){var t=this;console.log(t.min_amount),t.price=Number(e.detail.value);var i=Number(t.min_amount);t.price<i&&(t.price="",uni.showToast({title:"充值金额不小于".concat(i,"元,请重新输入!"),duration:1500,icon:"none"})),t.fastTap=!0},toUrl:function(){var e=this,t=window.location.href,i=uni.getStorageSync("access_id"),a={type:"jsapi_wechat",access_id:i,app:"get_config",module:"app",action:"commcenter",url:t};uni.request({data:a,url:uni.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){if(console.log(t),200==t.data.code){var i=t.data.data.config.appid;e.myappid=i;var a=t.data.data.url,n="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+i+"&redirect_uri="+a+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=n}else uni.showToast({title:t.data.message,duration:1500,icon:"none"})},error:function(e){console.log(e)}})},_checkValue:function(e){var t=this;console.log(t.min_amount),t.price=Number(e.detail.value);var i=Number(t.min_amount);t.price<i?t.fastTap=!1:t.fastTap=!0},pay1:function(){var e=this,t=e.LaiKeTuiCommon.ttIOSCantVisualpay();if(t&&this.fastTap){if(this.fastTap=!1,this.firstFlag=!1,""==this.price)return uni.showToast({title:"请输入充值金额！",duration:1e3,icon:"none"}),this.fastTap=!0,void(this.firstFlag=!0);uni.showLoading({title:"正在请求支付...",mask:!0}),this.pay_wx()}},baidu_pay:function(){},tt_pay:function(){},getOrderInfo:function(e){var t=this;if(console.log("start##getOrderInfo"),console.log(e),!e)return uni.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),void(t.firstFlag=!0);(new Date).getTime();var i={access_id:this.access_id,order_list:t.order_list,sNo:t.getCZNo(),title:"充值",module:"app",action:"pay",type:e,total:t.price};uni.hideLoading(),i.code=this.code,console.log("获取请求数据:");var a=t.LaiKeTuiCommon.getMPAliAuthCode();return a.then((function(e){return new Promise((function(e,t){console.log(uni.getStorageSync("url")),console.log(JSON.stringify(i,null,4)),uni.request({url:uni.getStorageSync("url"),data:i,success:function(t){200==t.statusCode&&e(t)},fail:function(e){}})}))}))},getCZNo:function(){var e=(new Date).getTime();return"CZ"+e+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())},alipay_minipay:function(){},rechargeSuccess:function(e){var t=this;setTimeout((function(){uni.redirectTo({url:"rechargeSuccess?mylei=1&money="+t.price+"&_type="+e})}),1e3)},weixinPay:function(){var e=this,t=this;this.loading=!0,uni.login({provider:"weixin",success:function(i){var a="mini_wechat",n={code:i.code,access_id:e.access_id,sNo:t.getCZNo(),title:"充值",module:"app",action:"pay",type:a,total:t.price};console.log(JSON.stringify(n,null,4)),uni.request({url:uni.getStorageSync("url"),data:n,success:function(e){if(console.log(JSON.stringify(e,null,4)),200===e.statusCode)if(200==e.statusCode){var i=e.data;console.log("@@"),console.log(JSON.stringify(i)),uni.requestPayment({provider:"wxpay",timeStamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:"MD5",paySign:i.paySign,success:function(e){uni.showToast({title:"充值成功！",duration:1e3,icon:"none"}),setTimeout((function(){uni.redirectTo({url:"rechargeSuccess?mylei=1&type=wx&_type=wx&money="+t.price})}),1e3),uni.hideLoading()},fail:function(e){uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading()}})}else uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading();else uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}})},fail:function(i){console.log("fail",i),e.loading=!1,uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading()}})},fail:function(i){console.log("fail",i),e.loading=!1,uni.showModal({title:"提示",content:"充值失败,请稍后再试",success:function(e){t.fastTap=!0}}),uni.hideLoading()}})},_payFail:function(){var e=this;uni.showModal({title:"提示",content:"支付失败，返回我的钱包！",success:function(t){console.log(t),e.firstFlag=!0,console.log("H5"+uni.getStorageSync("h5_url"));var i=uni.getStorageSync("h5_url")+"pagesB/myWallet/myWallet";t.cancel&&(i=uni.getStorageSync("h5_url")+"pages/tabBar/home"),setTimeout((function(){window.location.href=i}),1e3)}})},pay_wx:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,a,n,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,a="app_wechat",1,"",console.log("this.pay_provider："+e.pay_provider),"alipay"==i.pay_provider?("alipay",a="alipay"):("wxpay",a="jsapi_wechat",2),console.log("############"+a),t.next=9,i.getOrderInfo(a);case 9:n=t.sent,console.log(JSON.stringify(n)),console.log(JSON.stringify(n,null,4)),200!==n.statusCode&&i._payFail(),uni.hideLoading(),"alipay"==a?(o=uni.getStorageSync("endurl")+"order/"+i.sNo+"_alipay.html",window.location.href=o):"jsapi_wechat"==a&&(s=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:c.appid,timeStamp:c.timeStamp,nonceStr:c.nonceStr,package:c.package,signType:c.signType,paySign:c.paySign},(function(e){i.firstFlag=!0,i.code;var t=window.location.href,a=t.split("#")[0];a.concat("#/pages/pay/payResult");if("get_brand_wcpay_request:ok"==e.err_msg){i.$store.state.payRes=i.order_list;i.price1,i.sNo;window.location.href=uni.getStorageSync("h5_url")+"pagesB/myWallet/myWallet"}else i._payFail()}))},c=n.data,"undefined"!=typeof WeixinJSBridge?s(c):"undefined"==typeof WeixinJSBridge&&(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",s,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",s),document.attachEvent("onWeixinJSBridgeReady",s))));case 15:case"end":return t.stop()}}),t)})))()},_pay:function(e){this.pay_index=e,this.pay_style=e+1,0==e?this.pay_provider="alipay":1==e?this.pay_provider="app_wechat":2==e&&(this.pay_provider="baidu_pay")}},components:{heads:o.default}});t.default=s},"9a84":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".box[data-v-6d1a1e04]{background-color:#f4f4f4;height:100vh}.recharge_ts[data-v-6d1a1e04]{margin:0 %?30?%;font-size:%?22?%;color:#9d9d9d;position:relative;padding:%?19?% 0}.recharge_money[data-v-6d1a1e04]{background-color:#fff;padding:%?30?%;font-size:%?28?%;color:#020202;position:relative;margin-bottom:%?20?%}.recharge_money[data-v-6d1a1e04],\n.recharge_ts[data-v-6d1a1e04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.recharge_money uni-input[data-v-6d1a1e04]{border:none;margin-left:%?38?%}.setup-buttom[data-v-6d1a1e04]{width:%?690?%;height:%?90?%;line-height:%?90?%}.setup-buttom[data-v-6d1a1e04]{height:%?90?%;width:%?690?%;margin:0 auto;position:relative}.head[data-v-6d1a1e04],\n.order_header[data-v-6d1a1e04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.head[data-v-6d1a1e04]{height:%?88?%;padding:0 %?30?%;border-bottom:1px solid #eee;font-size:%?40?%;color:#242424}.head_img[data-v-6d1a1e04]{width:%?24?%;height:%?36?%}.head_search[data-v-6d1a1e04]{width:%?40?%;height:%?40?%;visibility:hidden}.order_header[data-v-6d1a1e04]{-webkit-justify-content:space-around;justify-content:space-around;width:100%;border-bottom:1px solid #d2d2d2}.recharge_money .span[data-v-6d1a1e04]{width:25%}.choose_ul[data-v-6d1a1e04]{background-color:#fff;position:relative}.choose_ul > li[data-v-6d1a1e04]:first-child{font-size:%?28?%}.pay_div[data-v-6d1a1e04]{position:relative;width:50%}.pay_div > p[data-v-6d1a1e04]{position:absolute;top:%?6?%;left:%?64?%}\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 订单模块颜色值 */\n/* 背景颜色 */\n/*  背景渐变色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */",""]),e.exports=t},dcea:function(e,t,i){"use strict";var a=i("3e92"),n=i.n(a);n.a}}]);